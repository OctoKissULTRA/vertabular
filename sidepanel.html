<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Vertabular</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <!-- Top Bar -->
    <header class="top-bar" role="toolbar" aria-label="Tab controls">
      <button id="new-tab-btn" class="icon-btn" aria-label="Open new tab" title="New tab">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
      </button>

      <div class="search-container">
        <svg class="search-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
        <input type="text" id="search-input" placeholder="Search tabs..." aria-label="Search tabs" spellcheck="false" autocomplete="off">
      </div>

      <button id="workspaces-btn" class="icon-btn" aria-label="Workspaces" title="Workspaces">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12zM10 9h8v2h-8zm0 3h4v2h-4zm0-6h8v2h-8z"/></svg>
      </button>

      <button id="settings-btn" class="icon-btn" aria-label="Settings" title="Settings">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.58 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
      </button>
    </header>

    <!-- Tab List -->
    <main id="scroll-container" role="listbox" aria-label="Open tabs">
      <!-- Pinned Tabs Section -->
      <section id="pinned-tabs-container" class="section-container hidden" aria-label="Pinned tabs">
        <div class="section-header">
          <svg viewBox="0 0 24 24" width="14" height="14" aria-hidden="true" style="fill: currentColor"><path d="M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"/></svg>
          Pinned
        </div>
        <div id="pinned-list" class="tab-list" role="group"></div>
      </section>

      <!-- Main Tabs Section -->
      <section id="main-tabs-container" class="section-container" aria-label="All tabs">
        <div id="main-list" class="tab-list" role="group"></div>
      </section>
    </main>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container" role="status" aria-live="polite"></div>

    <!-- Workspaces Overlay -->
    <div id="workspaces-overlay" class="overlay hidden" role="dialog" aria-labelledby="workspaces-title" aria-modal="true">
      <header class="overlay-header">
        <h3 id="workspaces-title">Workspaces</h3>
        <button id="close-workspaces-btn" class="overlay-close-btn" aria-label="Close workspaces">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </header>
      <div class="overlay-content">
        <div class="workspace-input-group">
          <input type="text" id="workspace-name-input" placeholder="Workspace name..." aria-label="Workspace name">
          <button id="save-workspace-btn" class="btn btn-primary">Save</button>
        </div>
        <div class="workspace-list-header">
          <span class="workspace-list-title">Saved Workspaces</span>
          <div class="workspace-header-actions">
            <button id="import-workspaces-btn" class="btn btn-text" title="Import workspaces from JSON">Import</button>
            <button id="export-workspaces-btn" class="btn btn-text" title="Export all workspaces">Export</button>
          </div>
        </div>
        <input type="file" id="import-file-input" accept=".json" style="display: none;">
        <div id="workspaces-list" role="list" aria-label="Saved workspaces"></div>
      </div>
    </div>

    <!-- Settings Overlay -->
    <div id="settings-overlay" class="overlay hidden" role="dialog" aria-labelledby="settings-title" aria-modal="true">
      <header class="overlay-header">
        <h3 id="settings-title">Settings</h3>
        <button id="close-settings-btn" class="overlay-close-btn" aria-label="Close settings">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </header>
      <div class="overlay-content">

        <!-- Focus Mode Toggle -->
        <div class="setting-item">
          <div class="setting-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
          </div>
          <div class="setting-text">
            <div class="setting-title">Focus Mode</div>
            <div class="setting-desc">Fullscreen to hide the tab bar</div>
          </div>
          <label class="toggle">
            <input type="checkbox" id="focus-mode-toggle" aria-describedby="focus-mode-desc">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <!-- Memory Saver -->
        <div class="setting-item">
          <div class="setting-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/></svg>
          </div>
          <div class="setting-text">
            <div class="setting-title">Memory Saver</div>
            <div class="setting-desc">Hibernate inactive tabs to free RAM</div>
          </div>
          <button id="hibernate-all-btn" class="btn btn-secondary">Hibernate All</button>
        </div>

        <!-- Duplicate Detection -->
        <div class="setting-item">
          <div class="setting-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
          </div>
          <div class="setting-text">
            <div class="setting-title">Close Duplicates</div>
            <div class="setting-desc">Remove tabs with the same URL</div>
          </div>
          <button id="close-duplicates-btn" class="btn btn-secondary">Find & Close</button>
        </div>

        <!-- Panel Position -->
        <div class="setting-item">
          <div class="setting-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm8 14H5V5h6v14zm10 0h-8V5h8v14z"/></svg>
          </div>
          <div class="setting-text">
            <div class="setting-title">Panel Position</div>
            <div class="setting-desc">Move panel to left or right side</div>
          </div>
          <button id="open-appearance-btn" class="btn btn-secondary">Chrome Settings</button>
        </div>

        <!-- Keyboard Shortcuts -->
        <div class="setting-item">
          <div class="setting-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"/></svg>
          </div>
          <div class="setting-text">
            <div class="setting-title">Keyboard Shortcuts</div>
            <div class="setting-desc">
              <kbd class="kbd">/</kbd> Search
              <kbd class="kbd" style="margin-left: 8px">&#8593;&#8595;</kbd> Navigate
              <kbd class="kbd" style="margin-left: 8px">Ctrl+Z</kbd> Undo
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu hidden" role="menu" aria-label="Tab actions">
      <div class="menu-item" id="ctx-new-tab" role="menuitem" tabindex="-1">
        <svg class="menu-item-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
        New Tab
      </div>
      <div class="menu-separator" role="separator"></div>
      <div class="menu-item" id="ctx-pin" role="menuitem" tabindex="-1">
        <svg class="menu-item-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"/></svg>
        <span class="menu-item-text">Pin Tab</span>
      </div>
      <div class="menu-item" id="ctx-hibernate" role="menuitem" tabindex="-1">
        <svg class="menu-item-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/></svg>
        <span class="menu-item-text">Hibernate</span>
      </div>
      <div class="menu-item" id="ctx-mute" role="menuitem" tabindex="-1">
        <svg class="menu-item-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
        <span class="menu-item-text">Mute Site</span>
      </div>
      <div class="menu-item" id="ctx-duplicate" role="menuitem" tabindex="-1">
        <svg class="menu-item-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
        Duplicate
      </div>
      <div class="menu-separator" role="separator"></div>
      <div class="menu-item" id="ctx-group" role="menuitem" tabindex="-1">
        <svg class="menu-item-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/></svg>
        Add to New Group
      </div>
      <div class="menu-separator" role="separator"></div>
      <div class="menu-item" id="ctx-fullscreen" role="menuitem" tabindex="-1">
        <svg class="menu-item-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>
        Toggle Fullscreen
      </div>
      <div class="menu-separator" role="separator"></div>
      <div class="menu-item" id="ctx-close" role="menuitem" tabindex="-1">
        <svg class="menu-item-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        Close Tab
        <span class="menu-item-shortcut">Del</span>
      </div>
      <div class="menu-item danger" id="ctx-close-others" role="menuitem" tabindex="-1">
        <svg class="menu-item-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        Close Other Tabs
      </div>
    </div>

    <script src="sidepanel.js"></script>
  </body>
</html>
